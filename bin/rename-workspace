#!/usr/bin/python

from json import loads
from subprocess import check_output, call

output = check_output(['i3-msg', '-t', 'get_workspaces'])
ws = loads(output)
index = [i for i in range(len(ws)) if ws[i]['focused']]
num = ws[index[0]]['num']
name = ws[index[0]]['name']
try:
    nname = check_output(['zenity', '--title', "Enter workspace name", '--entry', '--text', "Set name to?"])
    nname = nname.strip()
    if nname == '':
        runstr = 'rename workspace \"%(old)s\" to %(n)i' %{'old': name, 'n': num}
    else:
        runstr = 'rename workspace \"%(old)s\" to %(n)i: ' %{'old': name, 'n': num}
        runstr += nname
        call(['i3-msg', runstr]) 
except:
    print 'ERROR'
